(this["webpackJsonpreact-verification"]=this["webpackJsonpreact-verification"]||[]).push([[5],{200:function(e,t,a){"use strict";a.r(t);var r=a(131),n=a.n(r),i=a(133),s=a(47),c=a(38),o=a(128),u=a(0),l=a(201),d=a(199),m=a(197),j=a(198),f=a(168),b=a.n(f),h=a(195),p=a(98),v=a(196),O=a(134),x=function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},code:{marginTop:2}}},g=a(148),y=a(149),C=a(150),N=a.n(C),k=new(function(){function e(t){Object(g.a)(this,e),this.baseUrl=t,this.queue={}}return Object(y.a)(e,[{key:"getInsideConfig",value:function(){return{baseURL:this.baseUrl,headers:{},withCredentials:!1}}},{key:"destroy",value:function(e){delete this.queue[e]}},{key:"interceptors",value:function(e,t){var a=this;e.interceptors.request.use((function(e){return Object.keys(a.queue).length,a.queue[t]=!0,e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return a.destroy(t),{data:e.data,status:e.status}}),(function(e){return a.destroy(t),Promise.reject(e.response)}))}},{key:"request",value:function(e){var t=N.a.create(),a=Object.assign(this.getInsideConfig(),e);return this.interceptors(t,a.url),t(a)}}]),e}())(a(52).a.baseUrl.pro),q=function(e){var t=e.fullName,a=e.phone,r=e.email,n=e.vCode;return k.request({url:"/api/createCustomerByEmail",data:{fullName:t,phone:a,email:r,vCode:n},method:"post"})},w=a(4),S=function(e){var t=e.seconds,a=Object(u.useState)(t),r=Object(o.a)(a,2),n=r[0],i=r[1];return Object(u.useEffect)((function(){if(n){var e=setInterval((function(){i(n-1)}),1e3);return function(){return clearInterval(e)}}}),[n]),Object(w.jsxs)(w.Fragment,{children:["Resend in ",n," s"]})},T=a(53);function V(){return Object(w.jsxs)(h.a,{variant:"body2",color:"textSecondary",align:"center",children:[Object(w.jsx)("span",{children:"Created by Sam "}),(new Date).getFullYear(),"."]})}var W=Object(p.a)(x),E={fullName:"",phone:"",email:"",vCode:""};t.default=function(){var e=W(),t=Object(T.b)().enqueueSnackbar,a=function(e,a){return t(a,{variant:e})},r=Object(u.useState)(E),f=Object(o.a)(r,2),p=f[0],x=f[1],g=function(e,t){x(Object(c.a)(Object(c.a)({},p),{},Object(s.a)({},t,e.target.value)))},y=Object(u.useState)(!1),C=Object(o.a)(y,2),N=C[0],F=C[1],I=Object(u.useRef)(null),U=Object(u.useState)(!1),B=Object(o.a)(U,2),M=B[0],J=B[1];Object(u.useEffect)((function(){J(p.email&&(null===I||void 0===I?void 0:I.current.childs[2].state.isValid)&&!N)}),[p,N]);var R=function(){var e=Object(i.a)(n.a.mark((function e(){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),e.next=4,n=p.email,k.request({url:"/api/getVerificationCodeByEmail",data:{email:n},method:"post"});case 4:t=e.sent,200===(r=t.data).status?(setTimeout((function(){F(!1)}),3e4),a("success",r.message)):(a("warning",r.message),F(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),a("error",null!==e.t0&&void 0!==e.t0?e.t0:"Network error, please try it later!"),F(!1);case 13:case"end":return e.stop()}var n}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),D=!1,P=Object(u.useState)(null),Y=Object(o.a)(P,2),z=Y[0],A=Y[1],G=function(){var e=Object(i.a)(n.a.mark((function e(){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!D){e.next=3;break}return e.abrupt("return");case 3:return D=!0,e.next=6,q(p);case 6:t=e.sent,200===(r=t.data).status?(a("success",r.message),A(JSON.stringify(r.data))):a("warning",r.message),D=!1,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),a("error",null!==e.t0&&void 0!==e.t0?e.t0:"Network error, please try it later!"),D=!1;case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(v.a,{component:"main",className:"register-form",maxWidth:"xs",children:[Object(w.jsxs)("div",{className:e.paper,children:[Object(w.jsx)(l.a,{className:e.avatar,children:Object(w.jsx)(b.a,{})}),Object(w.jsx)(h.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(w.jsxs)(O.ValidatorForm,{className:e.form,onSubmit:G,ref:I,children:[Object(w.jsxs)(m.a,{container:!0,spacing:2,children:[Object(w.jsx)(m.a,{item:!0,xs:12,children:Object(w.jsx)(O.TextValidator,{variant:"outlined",fullWidth:!0,label:"FullName",name:"fullName",autoComplete:"fullName",autoFocus:!0,value:p.fullName,onChange:function(e){return g(e,"fullName")},validators:["required"],errorMessages:["this field is required"],"data-testid":"fullName"})}),Object(w.jsx)(m.a,{item:!0,xs:12,children:Object(w.jsx)(O.TextValidator,{variant:"outlined",fullWidth:!0,label:"phone",name:"phone",autoComplete:"phone",autoFocus:!0,value:p.phone,onChange:function(e){return g(e,"phone")},validators:["required"],errorMessages:["this field is required"],"data-testid":"phone"})}),Object(w.jsx)(m.a,{item:!0,xs:12,children:Object(w.jsx)(O.TextValidator,{variant:"outlined",fullWidth:!0,label:"Email Address",name:"email",value:p.email,onChange:function(e){return g(e,"email")},validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"],"data-testid":"email"})}),Object(w.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(O.TextValidator,{autoComplete:"verification code",name:"vCode",variant:"outlined",fullWidth:!0,label:"Verification code",size:"small",value:p.vCode,onChange:function(e){return g(e,"vCode")},validators:["required"],errorMessages:["this field is required"],"data-testid":"vCode"})}),Object(w.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(d.a,{type:"button",disabled:!M,fullWidth:!0,variant:"contained",color:"secondary",className:e.code,onClick:R,"data-testid":"vCodeBtn",children:N?Object(w.jsx)(S,{seconds:30}):"Get vCode"})})]}),Object(w.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,"data-testid":"submitBtn",children:"Sign Up"})]})]}),Object(w.jsx)(j.a,{mt:5,children:Object(w.jsx)(V,{})}),z?Object(w.jsxs)(j.a,{mt:5,children:[Object(w.jsx)("p",{children:"Your information is as follows: "}),Object(w.jsx)("p",{children:z})]}):null]})}}}]);
//# sourceMappingURL=5.ea689c36.chunk.js.map